# Scalability: increasing send rates

Date: 2023-06-27

## Status

**DRAFT**.

## Context

As Notify usage grows (and in particular as we anticipate increasing usage by PTMs) we need to increase our email and sms send rates.

## Options

There are three basic areas that can be changed to increase our send rates:
- Notify code
- Notify infrastructure
- AWS limits

### Notify code

We currently cannot send emails or sms to AWS fast enough to meet the rates AWS is willing to send. There are likely areas of the code that can be optimized. We should identify where the bottlenecks are in the process (for example, which queues are filling up).

Is there any way to send multiple emails (or sms) to AWS at once? If so that would likely improve our Notify -> SES boto time.

### Notify infrastructure

Our approach is already parallelized (an asyncronous task is created for each notification to be delivered). Simply running more tasks at once (ie more workers) would speed things up. This could of course create another bottleneck (we've had issues with the database in the past, for example)

### AWS limits

After Notify can meet our current AWS rates (100 emails per second and 20 sms / second in production) we can have those rates increased
- for email we can make a support request to AWS
- for sms we can procure more long codes, or, preferably, get a short code

## Analysis of Notify internals - email

_TODO: do the analysis

## Analysis of Notify internals - sms

_TODO: do the analysis

## Additional considerations

_TODO: Describe extras in here._

## Decision

_TODO: Describe the way forward._

## Consequences

_TODO: Describe foreseen and felt consequences of the decision (possible after 1-3 months)._
