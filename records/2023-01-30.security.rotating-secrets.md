# Secret Rotation

Date: 2023-01-30

## Status

**DRAFT**.

_VALUES: (DRAFT, IN REVIEW, APPROVED, REJECTED)_

## Context

We need to implement a secret rotation process for the following secret values:

- ADMIN_CLIENT_SECRET
- AUTH_TOKENS
- AWS_ACCESS_KEY_ID
- AWS_SECRET_ACCESS_KEY
- AWS_PINPOINT_APP_ID
- AWS_PINPOINT_KEYWORD
- DANGEROUS_SALT
- FRESH_DESK_API_URL
- FRESH_DESK_API_KEY
- MLWR_HOST
- MLWR_USER
- MLWR_KEY
- NEW_RELIC_LICENSE_KEY
- SECRET_KEY
- SENDGRID_API_KEY
- TWILIO_ACCOUNT_SID
- TWILIO_AUTH_TOKEN
- TWILIO_FROM_NUMBER

## Options

1. Automated Rotation using AWS Secret Manager and AWS Parameter Store
2. Transitive Rotation allowing previous and new secrets to coexist together for a short period of time, long enough to allow a rotation of secrets that can impact users and provide them enough time to regenerate their passwords or API keys.
3. Manual Rotation

## Additional Considerations

The following table enumerates the secret values, with columns indicating:

| Secret Value | User Impacting | Requires Regeneration | Impact User Passwords | Impact API Keys |
| ------------ | -------------- | ---------------------- | --------------------- | -------------- |
| ADMIN_CLIENT_SECRET | Yes | Yes | No | No |
| AUTH_TOKENS | Yes | Yes | No | No |
| AWS_ACCESS_KEY_ID | No | Yes | No | No |
| AWS_SECRET_ACCESS_KEY | No | Yes | No | No |
| AWS_PINPOINT_APP_ID | No | Yes | No | No |
| AWS_PINPOINT_KEYWORD | No | Yes | No | No |
| DANGEROUS_SALT | No | No | No | No |
| FRESH_DESK_API_URL | No | No | No | No |
| FRESH_DESK_API_KEY | No | Yes | No | Yes |
| MLWR_HOST | No | No | No | No |
| MLWR_USER | No | No | No | No |
| MLWR_KEY | No | No | No | No |
| NEW_RELIC_LICENSE_KEY | No | Yes | No | No |
| SECRET_KEY | No | No | No | No |
| SENDGRID_API_KEY | No | Yes | No | Yes |
| TWILIO_ACCOUNT_SID | No | Yes | No | No |
| TWILIO_AUTH_TOKEN | No | Yes | No | No |
| TWILIO_FROM_NUMBER | No | Yes | No | No |

## Decision

_TODO: Describe the way forward._

## Consequences

_TODO: Describe foreseen and felt consequences of the decision (possible after 1-3 months)._
